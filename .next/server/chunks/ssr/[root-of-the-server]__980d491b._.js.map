{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/init.ts"],"sourcesContent":["// src/firebase/init.ts\nimport { initializeApp, getApps, getApp, type FirebaseOptions } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport admin from 'firebase-admin';\n\nconst firebaseConfig: FirebaseOptions = {\n  projectId: \"atm-locator-nbjla\",\n  appId: \"1:717294013912:web:8efc3fc8530e0920c6b6ad\",\n  storageBucket: \"atm-locator-nbjla.firebasestorage.app\",\n  apiKey: \"AIzaSyAEC8Imf55z2TcJBLh4k01tN4ZEYA4a8S4\",\n  authDomain: \"atm-locator-nbjla.firebaseapp.com\",\n  messagingSenderId: \"717294013912\"\n};\n\n// Client-side initialization\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n\n// Admin SDK initialization (server-side only)\nconst initAdmin = () => {\n    if (admin.apps.length > 0) {\n        return admin.app();\n    }\n    \n    // This requires GOOGLE_APPLICATION_CREDENTIALS to be set in the environment.\n    // In a managed environment like Cloud Run, this is handled automatically.\n    // For local development, you'd need to set this environment variable\n    // to point to your service account key file.\n    return admin.initializeApp({\n        credential: admin.credential.applicationDefault(),\n        databaseURL: `https://atm-locator-nbjla.firebaseio.com` // Optional but good practice\n    });\n};\n\nconst getAdminDb = () => {\n    initAdmin();\n    return admin.firestore();\n};\n\nexport { auth, db, getAdminDb };\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AACvB;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;AAEA,MAAM,iBAAkC;IACtC,WAAW;IACX,OAAO;IACP,eAAe;IACf,QAAQ;IACR,YAAY;IACZ,mBAAmB;AACrB;AAEA,6BAA6B;AAC7B,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AACrE,MAAM,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;AAGxB,8CAA8C;AAC9C,MAAM,YAAY;IACd,IAAI,2HAAA,CAAA,UAAK,CAAC,IAAI,CAAC,MAAM,GAAG,GAAG;QACvB,OAAO,2HAAA,CAAA,UAAK,CAAC,GAAG;IACpB;IAEA,6EAA6E;IAC7E,0EAA0E;IAC1E,qEAAqE;IACrE,6CAA6C;IAC7C,OAAO,2HAAA,CAAA,UAAK,CAAC,aAAa,CAAC;QACvB,YAAY,2HAAA,CAAA,UAAK,CAAC,UAAU,CAAC,kBAAkB;QAC/C,aAAa,CAAC,wCAAwC,CAAC,CAAC,6BAA6B;IACzF;AACJ;AAEA,MAAM,aAAa;IACf;IACA,OAAO,2HAAA,CAAA,UAAK,CAAC,SAAS;AAC1B","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/get-dashboard-data.ts"],"sourcesContent":["\n'use server';\n\nimport { getAdminDb } from \"@/firebase/init\";\nimport type { Atm } from \"@/types\";\n\nexport interface DashboardData {\n    atmCount: number;\n    userCount: number;\n    chartData: {\n        name: string;\n        value: number;\n        fill: string;\n    }[];\n}\n\nexport async function getDashboardData(): Promise<DashboardData> {\n    try {\n        const adminDb = getAdminDb();\n        const atmsRef = adminDb.collection(\"atms\");\n        const usersRef = adminDb.collection(\"users\");\n\n        const [atmsSnapshot, usersSnapshot] = await Promise.all([\n            atmsRef.count().get(),\n            usersRef.count().get()\n        ]);\n\n        const atmCount = atmsSnapshot.data().count;\n        const userCount = usersSnapshot.data().count;\n\n        // Fetch all ATMs to calculate status distribution\n        const allAtmsSnapshot = await atmsRef.get();\n        const statusCounts: { [key in Atm['status']]: number } = {\n            com_dinheiro: 0,\n            sem_dinheiro: 0,\n            desconhecido: 0,\n        };\n\n        allAtmsSnapshot.forEach(doc => {\n            const atm = doc.data() as Omit<Atm, 'id'>;\n            if (statusCounts[atm.status] !== undefined) {\n                statusCounts[atm.status]++;\n            }\n        });\n\n        const chartData = [\n            { name: 'Com Dinheiro', value: statusCounts.com_dinheiro, fill: \"var(--color-com_dinheiro)\" },\n            { name: 'Sem Dinheiro', value: statusCounts.sem_dinheiro, fill: \"var(--color-sem_dinheiro)\"  },\n            { name: 'Desconhecido', value: statusCounts.desconhecido, fill: \"var(--color-desconhecido)\"  },\n        ];\n\n\n        return {\n            atmCount,\n            userCount,\n            chartData,\n        };\n\n    } catch (error) {\n        console.error(\"Error fetching dashboard data with Admin SDK:\", error);\n        throw new Error('Failed to fetch dashboard data. Check server logs and Firestore permissions for the service account.');\n    }\n}\n"],"names":[],"mappings":";;;;;AAGA;;;;;AAaO,eAAe;IAClB,IAAI;QACA,MAAM,UAAU,CAAA,GAAA,uHAAA,CAAA,aAAU,AAAD;QACzB,MAAM,UAAU,QAAQ,UAAU,CAAC;QACnC,MAAM,WAAW,QAAQ,UAAU,CAAC;QAEpC,MAAM,CAAC,cAAc,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;YACpD,QAAQ,KAAK,GAAG,GAAG;YACnB,SAAS,KAAK,GAAG,GAAG;SACvB;QAED,MAAM,WAAW,aAAa,IAAI,GAAG,KAAK;QAC1C,MAAM,YAAY,cAAc,IAAI,GAAG,KAAK;QAE5C,kDAAkD;QAClD,MAAM,kBAAkB,MAAM,QAAQ,GAAG;QACzC,MAAM,eAAmD;YACrD,cAAc;YACd,cAAc;YACd,cAAc;QAClB;QAEA,gBAAgB,OAAO,CAAC,CAAA;YACpB,MAAM,MAAM,IAAI,IAAI;YACpB,IAAI,YAAY,CAAC,IAAI,MAAM,CAAC,KAAK,WAAW;gBACxC,YAAY,CAAC,IAAI,MAAM,CAAC;YAC5B;QACJ;QAEA,MAAM,YAAY;YACd;gBAAE,MAAM;gBAAgB,OAAO,aAAa,YAAY;gBAAE,MAAM;YAA4B;YAC5F;gBAAE,MAAM;gBAAgB,OAAO,aAAa,YAAY;gBAAE,MAAM;YAA6B;YAC7F;gBAAE,MAAM;gBAAgB,OAAO,aAAa,YAAY;gBAAE,MAAM;YAA6B;SAChG;QAGD,OAAO;YACH;YACA;YACA;QACJ;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,iDAAiD;QAC/D,MAAM,IAAI,MAAM;IACpB;AACJ;;;IA9CsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/admin/%28panel%29/dashboard/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getDashboardData as '00879f9357d3b42e2666da171427705e594fa57d78'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/%28panel%29/dashboard/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/(panel)/dashboard/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/(panel)/dashboard/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/%28panel%29/dashboard/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/(panel)/dashboard/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/(panel)/dashboard/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}