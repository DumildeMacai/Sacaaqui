{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/user-data-table.tsx"],"sourcesContent":["\n\"use client\";\n\nimport type { User } from \"@/types\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface UserDataTableProps {\n  data: User[];\n}\n\nexport function UserDataTable({ data }: UserDataTableProps) {\n\n  const getReputationBadge = (reputation: number) => {\n    if (reputation > 1) return <Badge variant=\"default\">Alta</Badge>;\n    if (reputation === 1) return <Badge variant=\"secondary\">Normal</Badge>;\n    return <Badge variant=\"destructive\">Baixa</Badge>;\n  }\n\n\n  return (\n    <div className=\"w-full\">\n        <div className=\"flex items-center justify-between py-4\">\n            <div>\n                <h2 className=\"text-2xl font-bold tracking-tight font-headline\">Gerenciamento de Usuários</h2>\n                <p className=\"text-muted-foreground\">Visualize os utilizadores registados na plataforma.</p>\n            </div>\n        </div>\n        <div className=\"rounded-md border bg-card\">\n        <Table>\n          <TableHeader>\n              <TableRow>\n                <TableHead>Nome</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Telefone</TableHead>\n                <TableHead>Reputação</TableHead>\n              </TableRow>\n          </TableHeader>\n          <TableBody>\n            {data.length ? (\n              data.map((user) => (\n                <TableRow key={user.id}>\n                  <TableCell className=\"font-medium\">{user.name}</TableCell>\n                  <TableCell>{user.email}</TableCell>\n                  <TableCell>{user.phoneNumber}</TableCell>\n                  <TableCell>{getReputationBadge(user.reputation)}</TableCell>\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={4} className=\"h-24 text-center\">\n                  Nenhum utilizador encontrado.\n                </TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAIA;AAQA;AAXA;;;;AAiBO,SAAS,cAAc,EAAE,IAAI,EAAsB;IAExD,MAAM,qBAAqB,CAAC;QAC1B,IAAI,aAAa,GAAG,qBAAO,8OAAC,iIAAA,CAAA,QAAK;YAAC,SAAQ;sBAAU;;;;;;QACpD,IAAI,eAAe,GAAG,qBAAO,8OAAC,iIAAA,CAAA,QAAK;YAAC,SAAQ;sBAAY;;;;;;QACxD,qBAAO,8OAAC,iIAAA,CAAA,QAAK;YAAC,SAAQ;sBAAc;;;;;;IACtC;IAGA,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;;sCACG,8OAAC;4BAAG,WAAU;sCAAkD;;;;;;sCAChE,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;0BAG7C,8OAAC;gBAAI,WAAU;0BACf,cAAA,8OAAC,iIAAA,CAAA,QAAK;;sCACJ,8OAAC,iIAAA,CAAA,cAAW;sCACR,cAAA,8OAAC,iIAAA,CAAA,WAAQ;;kDACP,8OAAC,iIAAA,CAAA,YAAS;kDAAC;;;;;;kDACX,8OAAC,iIAAA,CAAA,YAAS;kDAAC;;;;;;kDACX,8OAAC,iIAAA,CAAA,YAAS;kDAAC;;;;;;kDACX,8OAAC,iIAAA,CAAA,YAAS;kDAAC;;;;;;;;;;;;;;;;;sCAGjB,8OAAC,iIAAA,CAAA,YAAS;sCACP,KAAK,MAAM,GACV,KAAK,GAAG,CAAC,CAAC,qBACR,8OAAC,iIAAA,CAAA,WAAQ;;sDACP,8OAAC,iIAAA,CAAA,YAAS;4CAAC,WAAU;sDAAe,KAAK,IAAI;;;;;;sDAC7C,8OAAC,iIAAA,CAAA,YAAS;sDAAE,KAAK,KAAK;;;;;;sDACtB,8OAAC,iIAAA,CAAA,YAAS;sDAAE,KAAK,WAAW;;;;;;sDAC5B,8OAAC,iIAAA,CAAA,YAAS;sDAAE,mBAAmB,KAAK,UAAU;;;;;;;mCAJjC,KAAK,EAAE;;;;0DAQxB,8OAAC,iIAAA,CAAA,WAAQ;0CACP,cAAA,8OAAC,iIAAA,CAAA,YAAS;oCAAC,SAAS;oCAAG,WAAU;8CAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUpE","debugId":null}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/get-admin-data.ts"],"sourcesContent":["\n'use server';\n\nimport { getAdminServices } from \"@/firebase/admin\";\nimport type { Atm, User } from \"@/types\";\n\ninterface AdminVerificationResult {\n    isAdmin: boolean;\n    error?: string;\n}\n\n// Verifica se o utilizador é um administrador\nasync function verifyAdmin(token: string): Promise<AdminVerificationResult> {\n    try {\n        const { auth } = getAdminServices();\n        const decodedToken = await auth.verifyIdToken(token);\n        \n        if (decodedToken.email === 'admin@admin.com') {\n            return { isAdmin: true };\n        } else {\n            return { isAdmin: false, error: 'Utilizador não é um administrador.' };\n        }\n    } catch (error) {\n        console.error(\"Erro na verificação do token:\", error);\n        return { isAdmin: false, error: 'Token inválido ou expirado.' };\n    }\n}\n\n\n// Server Action para buscar os dados do dashboard\nexport async function getDashboardData(token: string) {\n    const adminCheck = await verifyAdmin(token);\n    if (!adminCheck.isAdmin) {\n        return { success: false, error: adminCheck.error };\n    }\n\n    try {\n        const { db } = getAdminServices();\n        const atmsSnapshot = await db.collection('atms').get();\n        const usersSnapshot = await db.collection('users').get();\n        \n        const atms = atmsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Omit<Atm, 'lastUpdate' | 'reports'>[];\n\n        return {\n            success: true,\n            data: {\n                atmCount: atmsSnapshot.size,\n                userCount: usersSnapshot.size,\n                atms: atms,\n            }\n        };\n    } catch (error) {\n        console.error(\"Erro ao buscar dados do dashboard (server):\", error);\n        return { success: false, error: 'Falha ao buscar dados do Firestore.' };\n    }\n}\n\n\n// Server Action para buscar a lista de utilizadores\nexport async function getUsersData(token: string) {\n    const adminCheck = await verifyAdmin(token);\n    if (!adminCheck.isAdmin) {\n        return { success: false, error: adminCheck.error };\n    }\n    \n    try {\n        const { db } = getAdminServices();\n        const usersSnapshot = await db.collection('users').get();\n\n        const users: User[] = usersSnapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data()\n        })) as User[];\n\n        return { success: true, data: users };\n    } catch (error) {\n        console.error(\"Erro ao buscar utilizadores (server):\", error);\n        return { success: false, error: 'Falha ao buscar utilizadores do Firestore.' };\n    }\n}\n"],"names":[],"mappings":";;;;;;IA2DsB,eAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/%28panel%29/users/page.tsx"],"sourcesContent":["\n'use client'\n\nimport { UserDataTable } from \"@/components/admin/user-data-table\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { User } from \"@/types\";\nimport { useEffect, useState } from \"react\";\nimport { auth } from '@/firebase/init';\nimport { onAuthStateChanged, getIdToken } from \"firebase/auth\";\nimport { getUsersData } from \"@/actions/get-admin-data\";\n\n\nexport default function AdminUsersPage() {\n    const [users, setUsers] = useState<User[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (user) => {\n            if (user) {\n                try {\n                    const token = await getIdToken(user);\n                    const result = await getUsersData(token);\n\n                    if (result.success && result.data) {\n                        setUsers(result.data);\n                    } else {\n                        throw new Error(result.error || 'Falha ao buscar utilizadores.');\n                    }\n                } catch (err: any) {\n                    console.error(err);\n                    setError('Falha ao buscar utilizadores. Verifique as permissões e os logs do servidor.');\n                } finally {\n                    setLoading(false);\n                }\n            } else {\n                 setLoading(false);\n                 setError('Acesso não autorizado.');\n            }\n        });\n        return () => unsubscribe();\n    }, []);\n\n\n    if (error) {\n        return <div className=\"text-destructive text-center\">{error}</div>;\n    }\n\n    if (loading) {\n        return (\n            <div className=\"space-y-4\">\n                 <div className=\"flex items-center justify-between py-4\">\n                    <div>\n                        <Skeleton className=\"h-8 w-64\" />\n                        <Skeleton className=\"h-4 w-80 mt-2\" />\n                    </div>\n                </div>\n                <div className=\"rounded-md border bg-card\">\n                    <div className=\"p-4 space-y-3\">\n                        <Skeleton className=\"h-12 w-full\" />\n                        <Skeleton className=\"h-12 w-full\" />\n                        <Skeleton className=\"h-12 w-full\" />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div>\n            <UserDataTable data={users} />\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AARA;;;;;;;;AAWe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,cAAc,CAAA,GAAA,oPAAA,CAAA,qBAAkB,AAAD,EAAE,uHAAA,CAAA,OAAI,EAAE,OAAO;YAChD,IAAI,MAAM;gBACN,IAAI;oBACA,MAAM,QAAQ,MAAM,CAAA,GAAA,6OAAA,CAAA,aAAU,AAAD,EAAE;oBAC/B,MAAM,SAAS,MAAM,CAAA,GAAA,sJAAA,CAAA,eAAY,AAAD,EAAE;oBAElC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;wBAC/B,SAAS,OAAO,IAAI;oBACxB,OAAO;wBACH,MAAM,IAAI,MAAM,OAAO,KAAK,IAAI;oBACpC;gBACJ,EAAE,OAAO,KAAU;oBACf,QAAQ,KAAK,CAAC;oBACd,SAAS;gBACb,SAAU;oBACN,WAAW;gBACf;YACJ,OAAO;gBACF,WAAW;gBACX,SAAS;YACd;QACJ;QACA,OAAO,IAAM;IACjB,GAAG,EAAE;IAGL,IAAI,OAAO;QACP,qBAAO,8OAAC;YAAI,WAAU;sBAAgC;;;;;;IAC1D;IAEA,IAAI,SAAS;QACT,qBACI,8OAAC;YAAI,WAAU;;8BACV,8OAAC;oBAAI,WAAU;8BACZ,cAAA,8OAAC;;0CACG,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAG5B,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;IAKxC;IAEA,qBACI,8OAAC;kBACG,cAAA,8OAAC,oJAAA,CAAA,gBAAa;YAAC,MAAM;;;;;;;;;;;AAGjC","debugId":null}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// Since we're using the Edge build of Flight client for SSR [1], here we need to\n// also use the same Edge build to create the reference. For the client bundle,\n// we use the default and let Webpack to resolve it to the correct version.\n// 1: https://github.com/vercel/next.js/blob/16eb80b0b0be13f04a6407943664b5efd8f3d7d0/packages/next/src/server/app-render/use-flight-response.tsx#L24-L26\nexport const createServerReference = (\n  (!!process.env.NEXT_RUNTIME\n    ? // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client.edge')\n    : // eslint-disable-next-line import/no-extraneous-dependencies\n      require('react-server-dom-webpack/client')) as typeof import('react-server-dom-webpack/client')\n).createServerReference\n"],"names":["callServer","createServerReference","findSourceMapURL","process","env","NEXT_RUNTIME","require"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IASNC,qBAAqB,EAAA;eAArBA;;IARJC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;AAQ1B,MAAMD,wBACV,CAAA,CAAC,CAACE,QAAQC,GAAG,CAACC,YAAY,GAEvBC,QAAQ,0CAERA,QAAQ,8JAAiC,EAC7CL,qBAAqB","ignoreList":[0],"debugId":null}}]
}