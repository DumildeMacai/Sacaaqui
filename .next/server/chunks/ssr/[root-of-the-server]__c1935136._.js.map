{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/firebase/init.ts"],"sourcesContent":["// src/firebase/init.ts\nimport { initializeApp, getApps, getApp, type FirebaseOptions } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig: FirebaseOptions = {\n  projectId: \"atm-locator-nbjla\",\n  appId: \"1:717294013912:web:8efc3fc8530e0920c6b6ad\",\n  storageBucket: \"atm-locator-nbjla.firebasestorage.app\",\n  apiKey: \"AIzaSyAEC8Imf55z2TcJBLh4k01tN4ZEYA4a8S4\",\n  authDomain: \"atm-locator-nbjla.firebaseapp.com\",\n  messagingSenderId: \"717294013912\"\n};\n\n// Client-side initialization\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\nexport { auth, db };\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AACvB;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAkC;IACtC,WAAW;IACX,OAAO;IACP,eAAe;IACf,QAAQ;IACR,YAAY;IACZ,mBAAmB;AACrB;AAEA,6BAA6B;AAC7B,MAAM,MAAM,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,oLAAA,CAAA,SAAM,AAAD;AACrE,MAAM,OAAO,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/manage-suggestion.ts"],"sourcesContent":["\n'use server';\n\nimport { db } from \"@/firebase/init\";\nimport { addDoc, collection, doc, updateDoc, serverTimestamp } from \"firebase/firestore\";\nimport { revalidatePath } from \"next/cache\";\n\ninterface ApproveSuggestionInput {\n    suggestionId: string;\n    userId: string;\n    name: string;\n    address: string;\n    lat: number;\n    lng: number;\n    details?: string;\n}\n\nexport async function handleApproveSuggestion(input: ApproveSuggestionInput) {\n    if (!input.name || !input.address || isNaN(input.lat) || isNaN(input.lng)) {\n        return { success: false, error: \"Nome, endereço, latitude e longitude válidos são obrigatórios.\" };\n    }\n\n    try {\n        const newAtmPayload = {\n            name: input.name,\n            address: input.address,\n            location: {\n                lat: input.lat, \n                lng: input.lng,\n            },\n            details: input.details || '',\n            status: 'desconhecido',\n            lastUpdate: serverTimestamp(),\n            reports: [],\n        };\n        await addDoc(collection(db, 'atms'), newAtmPayload);\n\n        const suggestionRef = doc(db, 'atm_suggestions', input.suggestionId);\n        await updateDoc(suggestionRef, {\n            status: 'approved'\n        });\n\n        if (input.userId) {\n            await addDoc(collection(db, 'notifications'), {\n                userId: input.userId,\n                title: 'Sugestão Aprovada!',\n                message: `O ATM \"${input.name}\" que você sugeriu foi aprovado e adicionado ao mapa. Obrigado por sua contribuição!`,\n                read: false,\n                createdAt: serverTimestamp(),\n                type: 'suggestion_approved'\n            });\n        }\n\n        revalidatePath('/admin/suggestions');\n        revalidatePath('/dashboard');\n\n        return { success: true };\n\n    } catch (error) {\n        console.error(\"Error approving suggestion:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Ocorreu um erro desconhecido\";\n        return { success: false, error: `Falha ao aprovar a sugestão: ${errorMessage}` };\n    }\n}\n\n\ninterface RejectSuggestionInput {\n    suggestionId: string;\n    suggestionName: string;\n    userId: string;\n}\n\nexport async function handleRejectSuggestion(input: RejectSuggestionInput) {\n    try {\n        const suggestionRef = doc(db, 'atm_suggestions', input.suggestionId);\n        await updateDoc(suggestionRef, {\n            status: 'rejected'\n        });\n\n        if (input.userId) {\n            await addDoc(collection(db, 'notifications'), {\n                userId: input.userId,\n                title: 'Sugestão Rejeitada',\n                message: `A sua sugestão para o ATM \"${input.suggestionName}\" foi revista mas não pôde ser aprovada neste momento.`,\n                read: false,\n                createdAt: serverTimestamp(),\n                type: 'suggestion_rejected'\n            });\n        }\n\n        revalidatePath('/admin/suggestions');\n\n        return { success: true };\n    } catch (error) {\n        console.error(\"Error rejecting suggestion:\", error);\n        const errorMessage = error instanceof Error ? error.message : \"Ocorreu um erro desconhecido\";\n        return { success: false, error: `Falha ao rejeitar a sugestão: ${errorMessage}` };\n    }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/actions/geocode-address.ts"],"sourcesContent":["\n'use server';\n\ninterface GeocodeResult {\n    success: boolean;\n    lat?: number;\n    lng?: number; // Manter 'lng' para consistência interna, apesar da API retornar 'lon'\n    error?: string;\n}\n\nexport async function geocodeAddressAction(address: string): Promise<GeocodeResult> {\n    const apiKey = process.env.LOCATIONIQ_API_KEY;\n\n    if (!apiKey) {\n        console.error(\"LocationIQ API key is not configured.\");\n        return { success: false, error: 'A chave da API do LocationIQ não está configurada no servidor.' };\n    }\n\n    const url = `https://us1.locationiq.com/v1/search.php?key=${apiKey}&q=${encodeURIComponent(address)}&format=json&limit=1`;\n\n    try {\n        const response = await fetch(url);\n        const data = await response.json();\n\n        if (response.ok && data && data.length > 0) {\n            const location = data[0];\n            return {\n                success: true,\n                lat: parseFloat(location.lat),\n                lng: parseFloat(location.lon), // A API retorna 'lon', mapeamos para 'lng'\n            };\n        } else {\n            const errorMessage = data.error || `Falha ao geocodificar o endereço. Resposta da API: ${response.statusText}`;\n            console.error('LocationIQ API Error:', errorMessage);\n            return { success: false, error: errorMessage };\n        }\n    } catch (error) {\n        console.error('Error fetching from LocationIQ API:', error);\n        return { success: false, error: 'Ocorreu um erro de rede ao tentar contatar a API de Geocodificação.' };\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAUO,eAAe,qBAAqB,OAAe;IACtD,MAAM,SAAS,QAAQ,GAAG,CAAC,kBAAkB;IAE7C,IAAI,CAAC,QAAQ;QACT,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,SAAS;YAAO,OAAO;QAAiE;IACrG;IAEA,MAAM,MAAM,CAAC,6CAA6C,EAAE,OAAO,GAAG,EAAE,mBAAmB,SAAS,oBAAoB,CAAC;IAEzH,IAAI;QACA,MAAM,WAAW,MAAM,MAAM;QAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,EAAE,IAAI,QAAQ,KAAK,MAAM,GAAG,GAAG;YACxC,MAAM,WAAW,IAAI,CAAC,EAAE;YACxB,OAAO;gBACH,SAAS;gBACT,KAAK,WAAW,SAAS,GAAG;gBAC5B,KAAK,WAAW,SAAS,GAAG;YAChC;QACJ,OAAO;YACH,MAAM,eAAe,KAAK,KAAK,IAAI,CAAC,mDAAmD,EAAE,SAAS,UAAU,EAAE;YAC9G,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAa;QACjD;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO;YAAE,SAAS;YAAO,OAAO;QAAsE;IAC1G;AACJ;;;IA9BsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/admin/%28panel%29/suggestions/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {handleApproveSuggestion as '408cbc0cba845c177411416c89f0ebf240f0dbfabd'} from 'ACTIONS_MODULE0'\nexport {handleRejectSuggestion as '40bd35e0421fcdfe86e5e3d617a874443e7a41d37f'} from 'ACTIONS_MODULE0'\nexport {geocodeAddressAction as '40a120578ee9bf31fe37699d6fb9705ec561252117'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAEA","debugId":null}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/%28panel%29/suggestions/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/(panel)/suggestions/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/(panel)/suggestions/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","debugId":null}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/%28panel%29/suggestions/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/admin/(panel)/suggestions/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/admin/(panel)/suggestions/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}